@using Microsoft.AspNetCore.Http
@{
    ViewData["Title"] = "Upload Image";
}

<h2>Upload Image for AI Haircut</h2>

<form id="upload-form" enctype="multipart/form-data" method="post" action="/api/imageai/change-hairstyle">
    <input type="file" name="image" accept="image/*" />
    <button type="submit">Upload Image</button>
</form>

<div id="result-image" style="margin-top: 20px;">
    <h3>Resulting Image (After Haircut):</h3>
    <img id="ai-result" src="" alt="AI Generated Image" />
</div>

<script>
    document.getElementById('upload-form').addEventListener('submit', async function (event) {
        event.preventDefault();

        const formData = new FormData(this);
        const response = await fetch('/Image/ProcessImage', {
            method: 'POST',
            body: formData
        });

        if (response.ok) {
            const blob = await response.blob();
            const url = URL.createObjectURL(blob);
            document.getElementById('ai-result').src = url;
        } else {
            alert('Error processing the image.');
        }
    });
</script>
